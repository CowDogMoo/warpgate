---
# Warpgate Multi-Source Template Configuration
#
# This file defines where Warpgate should look for Packer templates.
# Templates can come from multiple sources (local directories, git repos, etc.)

# Template Sources Configuration
template_sources:
  # Primary in-repo templates
  - name: warpgate-core
    path: ./packer-templates
    type: local
    enabled: true
    description: Core Warpgate templates maintained in this repository

# Template Build Configuration
build_config:
  # Default namespace for container images
  default_namespace: l50

  # Template-specific overrides
  template_overrides:
    runzero-explorer:
      namespace: cowdogmoo
      vars: "provision_repo_path=${HOME}/ansible-collection-bulwark template_name=runzero-explorer"

    sliver:
      namespace: l50
      vars: "arsenal_repo_path=${HOME}/ansible-collection-arsenal template_name=sliver"

    atomic-red-team:
      namespace: l50
      vars: "provision_repo_path=${HOME}/ansible-collection-arsenal template_name=atomic-red-team"

    attack-box:
      namespace: l50
      vars: "provision_repo_path=${HOME}/ansible-collection-arsenal template_name=attack-box"

    ttpforge:
      namespace: l50
      vars: "provision_repo_path=${HOME}/ansible-collection-arsenal template_name=ttpforge"

  # Default build architectures
  architectures:
    - amd64
    - arm64

# Discovery Configuration
discovery:
  # Files that must exist for a directory to be considered a valid template
  required_files:
    - docker.pkr.hcl
    - variables.pkr.hcl
    - plugins.pkr.hcl

  # Optional files (helpful but not required)
  optional_files:
    - locals.pkr.hcl
    - ami.pkr.hcl
    - README.md

  # Exclude patterns (directories to skip during discovery)
  exclude_patterns:
    - ".*" # Hidden directories
    - "_*" # Directories starting with underscore
    - "deprecated" # Deprecated templates
    - "test" # Test directories
